<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baroud Store - Services</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="css/style.css"> </head>
<body>
    <div class="main-container">
        <aside class="sidebar">
            <div class="logo">BAROUD</div>
            <nav>
                <a href="index.html">Home</a>
                <a href="service.html" class="active">Services</a>
                <a href="orders.html">My Orders</a>
            </nav>
        </aside>

        <main class="content">
            <header>
                <h1>Explore Services</h1>
                <div id="balance" class="balance-tag">Balance: $0.00</div>
            </header>

            <div class="services-grid" id="servicesGrid">
                </div>
        </main>
    </div>

    <script>
        const SB_URL = "https://pqrwitolonhfbfwtsnde.supabase.co";
        const SB_KEY = "YOUR_SUPABASE_KEY"; 
        const sb = supabase.createClient(SB_URL, SB_KEY);

        async function init() {
            // جلب الرصيد
            const { data: { user } } = await sb.auth.getUser();
            if (user) {
                const { data: prof } = await sb.from('profiles').select('balance').eq('id', user.id).single();
                document.getElementById('balance').innerText = `Balance: $${prof.balance}`;
            }

            // جلب المنتجات
            const { data: products } = await sb.from('products').select('*').eq('active', true);
            const grid = document.getElementById('servicesGrid');
            
            grid.innerHTML = products.map(p => `
                <div class="service-card" onclick="location.href='product.html?id=${p.id}'">
                    <div class="img-wrapper">
                        <img src="${p.image_url}" alt="">
                    </div>
                    <div class="card-info">
                        <h3>${p.title}</h3>
                        <span class="price">$${p.price}</span>
                    </div>
                </div>
            `).join('');
        }
        init();
    </script>
</body>
</html>
